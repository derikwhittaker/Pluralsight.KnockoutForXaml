var ToDo;(function(n){var t=function(){function t(){var n=this;this.ToDos=ko.observableArray(),this.OriginalToDos=ko.observableArray(),this.FilterText=ko.observable(""),this.fetchRemoteToDoList(),this.OverdueCount=ko.computed(function(){return _.filter(n.ToDos(),function(n){return n.Status()=="Overdue"}).length}),this.ActiveCount=ko.computed(function(){return _.filter(n.ToDos(),function(n){return n.Status()=="Active"}).length}),this.TotalCount=ko.computed(function(){return n.ToDos().length})}return t.prototype.addNewToDo=function(){var r=this,i=new n.MaintainItemViewModel(undefined),t="#todo-edit-modal";$(t).modal("show");$(t).on("shown",function(){i.fetchData();var n=$(t)[0];ko.applyBindings(i,n)});$(t).on("hide",function(){r.fetchRemoteToDoList(),ko.cleanNode($(t)[0]),$(t).off("shown hide")})},t.prototype.deleteToDo=function(n){var t=this,i="http://localhost:8888/ToDoServices/api/ToDo/Delete/"+n;$.ajax({url:i,type:"DELETE",success:function(){t.fetchRemoteToDoList()},error:function(){}})},t.prototype.editToDo=function(t){var u=this,r=new n.MaintainItemViewModel(t),i="#todo-edit-modal";$(i).modal("show");$(i).on("shown",function(){r.fetchData();var n=$(i)[0];ko.applyBindings(r,n)});$(i).on("hide",function(){u.fetchRemoteToDoList(),ko.cleanNode($(i)[0]),$(i).off("shown hide")})},t.prototype.filterList=function(){var n=this,t;n.FilterText().length==0?n.ToDos(n.OriginalToDos()):(t=_.filter(n.OriginalToDos(),function(t){return t.Task().toLowerCase().indexOf(n.FilterText().toLowerCase())>=0}),n.ToDos(t))},t.prototype.fetchRemoteToDoList=function(){var t=this;t.OriginalToDos.removeAll(),t.ToDos.removeAll(),$.get("http://localhost:8888/ToDoServices/api/ToDo/").done(function(i){var r=t.ToDos();_.each(i,function(t){var i=new n.ToDoItemViewModel(t);r.push(i)}),t.ToDos.valueHasMutated()}),this.OriginalToDos(this.ToDos())},t}();n.HomeViewModel=t})(ToDo||(ToDo={}))